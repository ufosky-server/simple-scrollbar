{"version":3,"sources":["../src/simple-scrollbar.js"],"names":[],"mappings":"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","file":"simple-scrollbar.js","sourcesContent":["const rafFallback = (callback) => setTimeout(callback, 0);\nconst raf = window.requestAnimationFrame || window.setImmediate || rafFallback;\n\nclass DragDealer {\n  constructor(element, context) {\n    this.element = element;\n    this.context = context;\n    this.lastPageY = 0;\n\n    this.element.addEventListener('mousedown', this.handleMouseDown.bind(this));\n  }\n\n  handleMouseDown = (event) => {\n    this.lastPageY = event.pageY;\n    this.element.classList.add('ss-grabbed');\n    document.body.classList.add('ss-grabbed');\n\n    document.addEventListener('mousemove', this.handleDrag);\n    document.addEventListener('mouseup', this.handleStop);\n\n    return false;\n  };\n\n  handleDrag = (event) => {\n    const delta = event.pageY - this.lastPageY;\n    this.lastPageY = event.pageY;\n\n    raf(() => this.context.area.scrollTop += delta / this.context.scrollRatio);\n  };\n\n  handleStop = () =>{\n    this.element.classList.remove('ss-grabbed');\n    document.body.classList.remove('ss-grabbed');\n\n    document.removeEventListener('mousemove', this.handleDrag);\n    document.removeEventListener('mouseup', this.handleStop);\n  };\n}\n\nclass Scrollbar {\n  constructor(element) {\n    this.target = element;\n    this.bar = '<div class=\"ss-scroll\">';\n\n    this.wrapper = document.createElement('div');\n    this.wrapper.setAttribute('class', 'ss-wrapper');\n\n    this.area = document.createElement('div');\n    this.area.setAttribute('class', 'ss-scrollarea');\n\n    this.element = document.createElement('div');\n    this.element.setAttribute('class', 'ss-content');\n\n    this.area.appendChild(this.element);\n    this.wrapper.appendChild(this.area);\n\n    while (this.target.firstChild) {\n      this.element.appendChild(this.target.firstChild);\n    }\n    this.target.appendChild(this.wrapper);\n\n    this.target.insertAdjacentHTML('beforeend', this.bar);\n    this.bar = this.target.lastChild;\n\n    new DragDealer(this.bar, this);\n    this.handleMoveBar();\n\n    this.area.addEventListener('scroll', this.handleMoveBar);\n    this.area.addEventListener('mouseenter', this.handleMoveBar);\n\n    this.target.classList.add('ss-container');\n    this.element.style.cssText=`width:${this.wrapper.offsetWidth}px`;\n  }\n\n  scrollTo = (top) => this.area.scrollTop = top;\n\n  handleMoveBar = (event) => {\n    let totalHeight = this.area.scrollHeight;\n    let ownHeight = this.area.clientHeight;\n    let _this = this;\n\n    this.scrollRatio = ownHeight / totalHeight;\n\n    raf(() => {\n      // Hide scrollbar if no scrolling is possible\n      if (_this.scrollRatio === 1) {\n        _this.bar.classList.add('ss-hidden');\n      } else {\n        _this.bar.classList.remove('ss-hidden');\n        _this.bar.style.cssText = `height:${_this.scrollRatio * 100}%; top:${(_this.area.scrollTop / totalHeight) * 100}%;`;\n      }\n    });\n  };\n}\n\nclass SimpleScrollbar {\n  constructor() {\n    this.scrolls = [];\n    this.initAll();\n  }\n\n  initElement(element) {\n    if (element.hasOwnProperty('data-simple-scrollbar')) {\n      return false;\n    }\n\n    this.scrolls[element] = new Scrollbar(element);\n    Object.defineProperty(element, 'data-simple-scrollbar', this.scrolls[element]);\n  }\n\n  scrollTo = (target, to) => this.scrolls[target].scrollTo(to);\n\n  initAll() {\n    const nodes = document.querySelectorAll('*[ss-container]');\n\n    for (var i = 0; i < nodes.length; i++) {\n      this.initElement(nodes[i]);\n    }\n  }\n}\n\nexport default SimpleScrollbar;\n"]}